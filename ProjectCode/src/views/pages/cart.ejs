<%- include ('../partials/head') %>
<%- include ('../partials/header') %>
<%- include ('../partials/message') %>

<main>
    <div class="container"> <!-- User's listings container -->
        <div class="card-header">
            <h1 style="text-align: center;">My Cart</h1>
        </div>
        <div class="card-group">
            <%
            var temp;
            var listing_price;
            // description, item_id, 
            if(!user_cart.length){%>
                
            <%}
            else{
                user_cart.forEach(function(l) {
                console.log(l.price);
                if(l.is_sale == 'Y') listing_price = `<h4 class="card-title" style="color:red">$${l.price} (Sale!)</h4>`;
                else listing_price = `<h4 class="card-title">$${l.price}</h4>`;
                
                temp = `<div class="card" style="width: 18rem;"> \
                            <img class="card-img-top" style="height: 25em; object-fit: contain;" \
                            src="https://assets.myntassets.com/dpr_1.5,q_60,w_400,c_limit,fl_progressive/assets/images/6849354/2022/2/9/cc41bfc1-55f8-47df-a705-d5a05b286a871644388786288-Roadster-Men-Blue--Beige-Regular-Fit-Checked-Casual-Shirt-88-1.jpg" \
                            alt="Card image cap"> \
                            <div class="card-body"> \
                                <h5 class="card-title">${l.name}</h5> \
                                ${listing_price} \
                                <p class="card-text">${l.description}</p> \
                                <p class="card-text"><small class="text-muted">Listed ${l.date_listed.toLocaleDateString('en-US')}</small></p> \
                                <a href="/listings/${l.item_id}">View Listing</a> \
                                <br> \
                                <a class="btn btn-primary" href="/purchase/${user.user_ID}/${l.item_id}" role="button">Purchase Item</a> \
                            </div> \
                        </div>`;
                %>
                <%- temp %>
                <% }); %>
            <% } %>
        </div>
        <% if(user_cart.length){ %>
            <a class="btn btn-primary" href="#" role="button">Purchase All</a>
        <%}
        else{ %>
            <p style="text-align: center; padding-top: 5%;"> 
                    There's nothing in your cart!
                    <br>
                    Add some items from our <a href="/catalog">catalog!</a>
            </p>
        <%}%>
    </div>
</main>
<%- include ('../partials/footer') %>
